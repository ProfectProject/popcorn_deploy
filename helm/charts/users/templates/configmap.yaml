apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "common.fullname" . }}-config
  labels:
    {{- include "common.labels" . | nindent 4 }}
data:
  # Database 설정 (환경별로 오버라이드)
  SPRING_DATASOURCE_URL: "jdbc:postgresql://postgres:5432/popcorn"
  SPRING_DATASOURCE_USERNAME: "popcorn"
  SPRING_JPA_HIBERNATE_DDL_AUTO: "validate"
  SPRING_JPA_SHOW_SQL: "false"
  
  # Redis 설정
  SPRING_REDIS_HOST: "redis"
  SPRING_REDIS_PORT: "6379"
  
  # Kafka 설정
  SPRING_KAFKA_BOOTSTRAP_SERVERS: "kafka:9092"
  SPRING_KAFKA_CONSUMER_GROUP_ID: "users-service-group"
  
  # Actuator 설정
  MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE: "health,info,metrics,prometheus"
  MANAGEMENT_ENDPOINT_HEALTH_SHOW_DETAILS: "always"
