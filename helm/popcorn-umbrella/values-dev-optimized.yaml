# 리소스 최적화 개발 환경 설정
# 목적: t3.small 노드에서 안정적으로 실행 가능한 최소 리소스 설정

# Global settings
global:
  imageRegistry: 375896310755.dkr.ecr.ap-northeast-2.amazonaws.com
  imageTag: latest
  environment: dev
  
  # 공통 데이터베이스 설정
  database:
    host: postgres
    port: 5432
    name: popcorn
    
  # 공통 Redis 설정
  redis:
    host: redis
    port: 6379
    
  # 공통 Kafka 설정
  kafka:
    bootstrapServers: kafka:9092

# Gateway Service
gateway:
  enabled: true
  replicaCount: 1
  image:
    tag: latest
  resources:
    requests:
      cpu: 50m        # 50% 감소
      memory: 128Mi   # 50% 감소
    limits:
      cpu: 200m       # 60% 감소
      memory: 256Mi   # 50% 감소
  ingress:
    enabled: false

# Users Service
users:
  enabled: true
  replicaCount: 1
  image:
    tag: latest
  resources:
    requests:
      cpu: 50m
      memory: 128Mi
    limits:
      cpu: 200m
      memory: 256Mi

# Stores Service
stores:
  enabled: true
  replicaCount: 1
  image:
    tag: latest
  resources:
    requests:
      cpu: 50m
      memory: 128Mi
    limits:
      cpu: 200m
      memory: 256Mi

# Order Service
order:
  enabled: true
  replicaCount: 1
  image:
    tag: latest
  resources:
    requests:
      cpu: 50m
      memory: 128Mi
    limits:
      cpu: 200m
      memory: 256Mi

# Payment Service (임시 비활성화 - 리소스 절약)
payment:
  enabled: false
  replicaCount: 1
  image:
    tag: latest
  resources:
    requests:
      cpu: 50m
      memory: 128Mi
    limits:
      cpu: 200m
      memory: 256Mi

# Order Query Service (임시 비활성화 - 리소스 절약)
orderQuery:
  enabled: false
  replicaCount: 1
  image:
    tag: latest
  resources:
    requests:
      cpu: 50m
      memory: 128Mi
    limits:
      cpu: 200m
      memory: 256Mi

# CheckIns Service (임시 비활성화 - 리소스 절약)
checkIns:
  enabled: false
  replicaCount: 1
  image:
    tag: latest
  resources:
    requests:
      cpu: 50m
      memory: 128Mi
    limits:
      cpu: 200m
      memory: 256Mi

# 리소스 계산:
# 활성화된 서비스: 4개 (gateway, users, stores, order)
# 총 메모리 요청: 4 × 128Mi = 512Mi
# 총 메모리 제한: 4 × 256Mi = 1024Mi
# 총 CPU 요청: 4 × 50m = 200m
# 총 CPU 제한: 4 × 200m = 800m
#
# 기존 대비 절약:
# - 메모리 요청: 1792Mi → 512Mi (71% 감소)
# - 메모리 제한: 3584Mi → 1024Mi (71% 감소)
# - 활성 서비스: 7개 → 4개 (43% 감소)
