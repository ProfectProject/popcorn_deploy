# Global settings
global:
  imageRegistry: 375896310755.dkr.ecr.ap-northeast-2.amazonaws.com
  imageTag: latest
  environment: dev
  
  # 공통 데이터베이스 설정
  database:
    host: postgres
    port: 5432
    name: popcorn
    
  # 공통 Redis 설정
  redis:
    host: redis
    port: 6379
    
  # 공통 Kafka 설정
  kafka:
    bootstrapServers: kafka:9092

  # 프론트 전역 URL
  frontend:
    appUrl: "http://localhost:3000"
    apiBaseUrl: "http://localhost:8080"
    storeApiBaseUrl: "http://localhost:8080"
    orderQueryApiBaseUrl: "http://localhost:8080"
    paymentApiBaseUrl: "http://localhost:8080"

# Gateway Service (내부 전용 - Ingress 비활성화)
frontend:
  enabled: true
  replicaCount: 1
  image:
    tag: latest
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi
  rollout:
    enabled: true
    keepDeployment: false
    replicas: 1
    strategy: blueGreen
    blueGreen:
      autoPromotionEnabled: true
      scaleDownDelaySeconds: 30
      previewReplicaCount: 1
    strategy: blueGreen
    blueGreen:
      autoPromotionEnabled: true
      scaleDownDelaySeconds: 30
      previewReplicaCount: 1
    canary:
      maxSurge: "25%"
      maxUnavailable: 0
  ingress:
    enabled: false

gateway:
  enabled: true
  replicaCount: 1
  image:
    tag: latest
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi
  rollout:
    enabled: true
    keepDeployment: false
    replicas: 1
    strategy: blueGreen
    blueGreen:
      autoPromotionEnabled: true
      scaleDownDelaySeconds: 30
      previewReplicaCount: 1
    canary:
      maxSurge: "25%"
      maxUnavailable: 0
  ingress:
    enabled: false  # 외부 노출 안 함

# Users Service
users:
  enabled: true
  replicaCount: 1
  image:
    tag: latest
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi
  rollout:
    enabled: true
    keepDeployment: false
    replicas: 1

# Stores Service
stores:
  enabled: true
  replicaCount: 1
  image:
    tag: latest
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi
  rollout:
    enabled: true
    keepDeployment: false
    replicas: 1
    strategy: blueGreen
    blueGreen:
      autoPromotionEnabled: true
      scaleDownDelaySeconds: 30
      previewReplicaCount: 1
    canary:
      maxSurge: "25%"
      maxUnavailable: 0

# Order Service
order:
  enabled: true
  replicaCount: 1
  image:
    tag: latest
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi
  rollout:
    enabled: true
    keepDeployment: false
    replicas: 1
    strategy: blueGreen
    blueGreen:
      autoPromotionEnabled: true
      scaleDownDelaySeconds: 30
      previewReplicaCount: 1
    canary:
      maxSurge: "25%"
      maxUnavailable: 0

# Payment Service
payment:
  enabled: true
  replicaCount: 1
  image:
    tag: latest
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi
  rollout:
    enabled: true
    keepDeployment: false
    replicas: 1
    strategy: blueGreen
    blueGreen:
      autoPromotionEnabled: true
      scaleDownDelaySeconds: 30
      previewReplicaCount: 1
    canary:
      maxSurge: "25%"
      maxUnavailable: 0

# Order Query Service (CQRS)
order-query:
  enabled: true
  replicaCount: 1
  image:
    tag: latest
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi
  rollout:
    enabled: true
    keepDeployment: false
    replicas: 1
    strategy: blueGreen
    blueGreen:
      autoPromotionEnabled: true
      scaleDownDelaySeconds: 30
      previewReplicaCount: 1
    canary:
      maxSurge: "25%"
      maxUnavailable: 0

# CheckIns Service (includes QR functionality)
checkins:
  enabled: true
  replicaCount: 1
  image:
    tag: latest
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi
  rollout:
    enabled: true
    keepDeployment: false
    replicas: 1
    strategy: blueGreen
    blueGreen:
      autoPromotionEnabled: true
      scaleDownDelaySeconds: 30
      previewReplicaCount: 1
    canary:
      maxSurge: "25%"
      maxUnavailable: 0
