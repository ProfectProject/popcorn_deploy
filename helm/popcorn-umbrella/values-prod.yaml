# Production environment overrides
global:
  environment: prod
  imageTag: latest
  
  # 실제 RDS 엔드포인트
  database:
    host: goorm-popcorn-prod-postgres.cds4g0gykt3t.ap-northeast-2.rds.amazonaws.com
    port: 5432
    name: popcorn
    
  # 실제 ElastiCache 엔드포인트
  redis:
    host: master.goorm-popcorn-cache-prod.mkltth.apn2.cache.amazonaws.com
    port: 6379
    
  # Kafka 설정 (infrastructure/kafka에서 배포)
  kafka:
    bootstrapServers: kafka-controller-0.kafka-controller-headless.kafka.svc.cluster.local:9092,kafka-controller-1.kafka-controller-headless.kafka.svc.cluster.local:9092,kafka-controller-2.kafka-controller-headless.kafka.svc.cluster.local:9092

# 운영 환경 고가용성 설정
gateway:
  replicaCount: 3
  image:
    tag: latest
  resources:
    requests:
      cpu: 200m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 1Gi
  autoscaling:
    enabled: true
    minReplicas: 3
    maxReplicas: 10
    targetCPUUtilizationPercentage: 70
  env:
    SPRING_PROFILES_ACTIVE: "prod"
    LOGGING_LEVEL_ROOT: "WARN"
    JAVA_OPTS: "-Xms512m -Xmx1024m"
  ingress:
    enabled: false  # 외부 노출 안 함 (내부 서비스 간 통신만)

users:
  replicaCount: 3
  image:
    tag: latest
  resources:
    requests:
      cpu: 200m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 1Gi
  autoscaling:
    enabled: true
    minReplicas: 3
    maxReplicas: 8
  env:
    SPRING_PROFILES_ACTIVE: "prod"
    JAVA_OPTS: "-Xms512m -Xmx1024m"

stores:
  replicaCount: 2
  image:
    tag: latest
  resources:
    requests:
      cpu: 200m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 1Gi
  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 6
  env:
    SPRING_PROFILES_ACTIVE: "prod"
    JAVA_OPTS: "-Xms512m -Xmx1024m"

order:
  replicaCount: 3
  image:
    tag: latest
  resources:
    requests:
      cpu: 200m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 1Gi
  autoscaling:
    enabled: true
    minReplicas: 3
    maxReplicas: 10
  env:
    SPRING_PROFILES_ACTIVE: "prod"
    JAVA_OPTS: "-Xms512m -Xmx1024m"

payment:
  enabled: true
  replicaCount: 2
  image:
    tag: latest
  resources:
    requests:
      cpu: 200m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 1Gi
  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 5
  env:
    SPRING_PROFILES_ACTIVE: "prod"
    JAVA_OPTS: "-Xms512m -Xmx1024m"

orderQuery:
  replicaCount: 2
  image:
    tag: latest
  resources:
    requests:
      cpu: 200m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 1Gi
  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 6
  env:
    SPRING_PROFILES_ACTIVE: "prod"
    JAVA_OPTS: "-Xms512m -Xmx1024m"

checkIns:
  enabled: true
  replicaCount: 2
  image:
    tag: latest
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi
  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 4
  env:
    SPRING_PROFILES_ACTIVE: "prod"
    JAVA_OPTS: "-Xms256m -Xmx512m"
