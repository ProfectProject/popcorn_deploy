kafka:
  fullnameOverride: kafka-prod
  controller:
    # Kafka 컨트롤러 OOM(Exit 137) 방지를 위한 운영 리소스 상향
    resources:
      requests:
        cpu: 500m
        memory: 1Gi
      limits:
        cpu: 1
        memory: 2Gi
    # 컨테이너 제한 메모리 대비 힙 비율을 낮춰 off-heap/OH 버퍼 여유 확보
    heapOpts: -XX:InitialRAMPercentage=35 -XX:MaxRAMPercentage=50

kafka-ui:
  fullnameOverride: kafka-ui
  ingress:
    enabled: true
    ingressClassName: alb
    annotations:
      alb.ingress.kubernetes.io/scheme: internet-facing
      alb.ingress.kubernetes.io/target-type: ip
      alb.ingress.kubernetes.io/certificate-arn: "arn:aws:acm:ap-northeast-2:375896310755:certificate/085e3315-785c-480d-93c2-57f656b60f7b"
      alb.ingress.kubernetes.io/ssl-redirect: "443"
    host: kafka.goormpopcorn.shop
    path: /
    pathType: Prefix
  yamlApplicationConfig:
    kafka:
      clusters:
        - name: popcorn-kafka
          bootstrapServers: kafka-prod:9092
          metrics:
            port: 9997
            type: JMX
          readOnly: false

  env:
    - name: KAFKA_CLUSTERS_0_NAME
      value: "popcorn-kafka"
    - name: KAFKA_CLUSTERS_0_BOOTSTRAPSERVERS
      value: "kafka-prod:9092"
