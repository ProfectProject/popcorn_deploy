# Grafana 운영 환경 설정

replicas: 1

resources:
  requests:
    cpu: 100m
    memory: 128Mi
  limits:
    cpu: 300m
    memory: 512Mi

ingress:
  enabled: true
  annotations:
    alb.ingress.kubernetes.io/certificate-arn: "arn:aws:acm:ap-northeast-2:375896310755:certificate/085e3315-785c-480d-93c2-57f656b60f7b"
    alb.ingress.kubernetes.io/ssl-redirect: "443"

persistence:
  enabled: true
  size: 10Gi

# 운영 환경에서는 Secret으로 관리
adminPassword: "CHANGE_ME"  # Kubernetes Secret으로 관리 권장

env:
  GF_SERVER_ROOT_URL: "https://grafana.goormpopcorn.shop"

# 고가용성 설정
autoscaling:
  enabled: false  # true → false
  minReplicas: 1
  maxReplicas: 3  # 5 → 3
  targetCPUUtilizationPercentage: 70

# 추가 플러그인
plugins:
  - grafana-piechart-panel
  - grafana-clock-panel
  - grafana-simple-json-datasource

grafana.ini:
  server:
    root_url: "https://grafana.goormpopcorn.shop"
  
  security:
    admin_user: admin
    cookie_secure: true
    cookie_samesite: lax
  
  users:
    allow_sign_up: false
    auto_assign_org: true
    auto_assign_org_role: Viewer
  
  auth:
    disable_login_form: false
  
  analytics:
    check_for_updates: true
    reporting_enabled: false
  
  log:
    mode: console
    level: info
