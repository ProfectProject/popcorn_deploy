# Loki 운영 환경 설정

# 운영 안정성을 위해 파일시스템 기반 단일 바이너리 모드 사용
deploymentMode: SingleBinary

loki:
  commonConfig:
    replication_factor: 1

  limits_config:
    retention_period: 168h  # 7일
    max_query_lookback: 168h
    ingestion_rate_mb: 10
    ingestion_burst_size_mb: 20

singleBinary:
  replicas: 1

  resources:
    requests:
      cpu: 100m
      memory: 192Mi
    limits:
      cpu: 300m
      memory: 512Mi

  persistence:
    enabled: true
    storageClass: gp3
    size: 20Gi

  tolerations:
    - key: karpenter.sh/spot
      operator: Exists
      effect: NoSchedule

read:
  replicas: 0

write:
  replicas: 0

backend:
  replicas: 0

gateway:
  enabled: false

# 메모리 사용량이 큰 기본 memcached 캐시는 비활성화
chunksCache:
  enabled: false

resultsCache:
  enabled: false
